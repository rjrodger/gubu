!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Gubu=e()}}((function(){var e=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0},t=function(){return e()&&!!Symbol.toStringTag},r="undefined"!=typeof Symbol&&Symbol,n=Array.prototype.slice,o=Object.prototype.toString,i=Function.prototype.bind||function(e){var t=this;if("function"!=typeof t||"[object Function]"!==o.call(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r,i=n.call(arguments,1),a=Math.max(0,t.length-i.length),u=[],l=0;l<a;l++)u.push("$"+l);if(r=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof r){var o=t.apply(this,i.concat(n.call(arguments)));return Object(o)===o?o:this}return t.apply(e,i.concat(n.call(arguments)))})),t.prototype){var p=function(){};p.prototype=t.prototype,r.prototype=new p,p.prototype=null}return r},a=i.call(Function.call,Object.prototype.hasOwnProperty),u=SyntaxError,l=Function,p=TypeError,s=function(e){try{return l('"use strict"; return ('+e+").constructor;")()}catch(t){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(Nt){c=null}var f,y=function(){throw new p},d=c?function(){try{return y}catch(e){try{return c(arguments,"callee").get}catch(t){return y}}}():y,g="function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&e(),h=Object.getPrototypeOf||function(e){return e.__proto__},b={},v="undefined"==typeof Uint8Array?void 0:h(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":g?h([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":b,"%AsyncGenerator%":b,"%AsyncGeneratorFunction%":b,"%AsyncIteratorPrototype%":b,"%Atomics%":"undefined"==typeof Atomics?void 0:Atomics,"%BigInt%":"undefined"==typeof BigInt?void 0:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?void 0:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?void 0:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?void 0:FinalizationRegistry,"%Function%":l,"%GeneratorFunction%":b,"%Int8Array%":"undefined"==typeof Int8Array?void 0:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?void 0:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":g?h(h([][Symbol.iterator]())):void 0,"%JSON%":"object"==typeof JSON?JSON:void 0,"%Map%":"undefined"==typeof Map?void 0:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&g?h((new Map)[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?void 0:Promise,"%Proxy%":"undefined"==typeof Proxy?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?void 0:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?void 0:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&g?h((new Set)[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":g?h(""[Symbol.iterator]()):void 0,"%Symbol%":g?Symbol:void 0,"%SyntaxError%":u,"%ThrowTypeError%":d,"%TypedArray%":v,"%TypeError%":p,"%Uint8Array%":"undefined"==typeof Uint8Array?void 0:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?void 0:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?void 0:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?void 0:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?void 0:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?void 0:WeakSet},A={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},w=i.call(Function.call,Array.prototype.concat),S=i.call(Function.apply,Array.prototype.splice),j=i.call(Function.call,String.prototype.replace),O=i.call(Function.call,String.prototype.slice),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,P=/\\(\\)?/g,E=function(e,t){var r,n=e;if(a(A,n)&&(n="%"+(r=A[n])[0]+"%"),a(m,n)){var o=m[n];if(o===b&&(o=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=h(o.prototype))}return m[t]=r,r}(n)),void 0===o&&!t)throw new p("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new u("intrinsic "+e+" does not exist!")},k=function(e,t){if("string"!=typeof e||0===e.length)throw new p("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new p('"allowMissing" argument must be a boolean');var r=function(e){var t=O(e,0,1),r=O(e,-1);if("%"===t&&"%"!==r)throw new u("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new u("invalid intrinsic syntax, expected opening `%`");var n=[];return j(e,I,(function(e,t,r,o){n[n.length]=r?j(o,P,"$1"):t||e})),n}(e),n=r.length>0?r[0]:"",o=E("%"+n+"%",t),i=o.name,l=o.value,s=!1,f=o.alias;f&&(n=f[0],S(r,w([0,1],f)));for(var y=1,d=!0;y<r.length;y+=1){var g=r[y],h=O(g,0,1),b=O(g,-1);if(('"'===h||"'"===h||"`"===h||'"'===b||"'"===b||"`"===b)&&h!==b)throw new u("property names with quotes must have matching quotes");if("constructor"!==g&&d||(s=!0),a(m,i="%"+(n+="."+g)+"%"))l=m[i];else if(null!=l){if(!(g in l)){if(!t)throw new p("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&y+1>=r.length){var v=c(l,g);l=(d=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:l[g]}else d=a(l,g),l=l[g];d&&!s&&(m[i]=l)}}return l},x=k("%Function.prototype.apply%"),$=k("%Function.prototype.call%"),F=k("%Reflect.apply%",!0)||i.call($,x),T=k("%Object.getOwnPropertyDescriptor%",!0),U=k("%Object.defineProperty%",!0),R=k("%Math.max%");if(U)try{U({},"a",{value:1})}catch(Nt){U=null}f=function(e){var t=F(i,$,arguments);return T&&U&&T(t,"length").configurable&&U(t,"length",{value:1+R(0,e.length-(arguments.length-1))}),t};var B=function(){return F(i,x,arguments)};U?U(f,"apply",{value:B}):f.apply=B;var N,D=f(k("String.prototype.indexOf")),V=function(e,t){var r=k(e,!!t);return"function"==typeof r&&D(e,".prototype.")>-1?f(r):r},M=t(),G=V("Object.prototype.toString"),_=function(e){return!(M&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===G(e)},W=function(e){return!!_(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==G(e)&&"[object Function]"===G(e.callee)},z=function(){return _(arguments)}();_.isLegacyArguments=W,N=z?_:W;var C,L=Object.prototype.toString,J=Function.prototype.toString,q=/^\s*(?:function)?\*/,H=t(),Z=Object.getPrototypeOf,K=Object.prototype.hasOwnProperty,Q=Object.prototype.toString,X=function(e,t,r){if("[object Function]"!==Q.call(t))throw new TypeError("iterator must be a function");var n=e.length;if(n===+n)for(var o=0;o<n;o++)t.call(r,e[o],o,e);else for(var i in e)K.call(e,i)&&t.call(r,e[i],i,e)},Y={};(function(e){(function(){"use strict";var t=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],r="undefined"==typeof globalThis?e:globalThis;Y=function(){for(var e=[],n=0;n<t.length;n++)"function"==typeof r[t[n]]&&(e[e.length]=t[n]);return e}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ee=k("%Object.getOwnPropertyDescriptor%",!0);if(ee)try{ee([],"length")}catch(Nt){ee=null}var te=ee,re={};(function(e){(function(){"use strict";var r=V("Object.prototype.toString"),n=t(),o="undefined"==typeof globalThis?e:globalThis,i=Y(),a=V("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},u=V("String.prototype.slice"),l={},p=Object.getPrototypeOf;n&&te&&p&&X(i,(function(e){var t=new o[e];if(Symbol.toStringTag in t){var r=p(t),n=te(r,Symbol.toStringTag);if(!n){var i=p(r);n=te(i,Symbol.toStringTag)}l[e]=n.get}})),re=function(e){if(!e||"object"!=typeof e)return!1;if(!n||!(Symbol.toStringTag in e)){var t=u(r(e),8,-1);return a(i,t)>-1}return!!te&&function(e){var t=!1;return X(l,(function(r,n){if(!t)try{t=r.call(e)===n}catch(Nt){}})),t}(e)}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var ne={};(function(e){(function(){"use strict";var r=V("Object.prototype.toString"),n=t(),o="undefined"==typeof globalThis?e:globalThis,i=Y(),a=V("String.prototype.slice"),u={},l=Object.getPrototypeOf;n&&te&&l&&X(i,(function(e){if("function"==typeof o[e]){var t=new o[e];if(Symbol.toStringTag in t){var r=l(t),n=te(r,Symbol.toStringTag);if(!n){var i=l(r);n=te(i,Symbol.toStringTag)}u[e]=n.get}}})),ne=function(e){return!!re(e)&&(n&&Symbol.toStringTag in e?function(e){var t=!1;return X(u,(function(r,n){if(!t)try{var o=r.call(e);o===n&&(t=o)}catch(Nt){}})),t}(e):a(r(e),8,-1))}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var oe={};function ie(e){return e.call.bind(e)}var ae="undefined"!=typeof BigInt,ue="undefined"!=typeof Symbol,le=ie(Object.prototype.toString),pe=ie(Number.prototype.valueOf),se=ie(String.prototype.valueOf),ce=ie(Boolean.prototype.valueOf);if(ae)var fe=ie(BigInt.prototype.valueOf);if(ue)var ye=ie(Symbol.prototype.valueOf);function de(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(Nt){return!1}}function ge(e){return"[object Map]"===le(e)}function he(e){return"[object Set]"===le(e)}function be(e){return"[object WeakMap]"===le(e)}function ve(e){return"[object WeakSet]"===le(e)}function me(e){return"[object ArrayBuffer]"===le(e)}function Ae(e){return"undefined"!=typeof ArrayBuffer&&(me.working?me(e):e instanceof ArrayBuffer)}function we(e){return"[object DataView]"===le(e)}function Se(e){return"undefined"!=typeof DataView&&(we.working?we(e):e instanceof DataView)}oe.isArgumentsObject=N,oe.isGeneratorFunction=function(e){if("function"!=typeof e)return!1;if(q.test(J.call(e)))return!0;if(!H)return"[object GeneratorFunction]"===L.call(e);if(!Z)return!1;if(void 0===C){var t=function(){if(!H)return!1;try{return Function("return function*() {}")()}catch(Nt){}}();C=!!t&&Z(t)}return Z(e)===C},oe.isTypedArray=re,oe.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},oe.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):re(e)||Se(e)},oe.isUint8Array=function(e){return"Uint8Array"===ne(e)},oe.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===ne(e)},oe.isUint16Array=function(e){return"Uint16Array"===ne(e)},oe.isUint32Array=function(e){return"Uint32Array"===ne(e)},oe.isInt8Array=function(e){return"Int8Array"===ne(e)},oe.isInt16Array=function(e){return"Int16Array"===ne(e)},oe.isInt32Array=function(e){return"Int32Array"===ne(e)},oe.isFloat32Array=function(e){return"Float32Array"===ne(e)},oe.isFloat64Array=function(e){return"Float64Array"===ne(e)},oe.isBigInt64Array=function(e){return"BigInt64Array"===ne(e)},oe.isBigUint64Array=function(e){return"BigUint64Array"===ne(e)},ge.working="undefined"!=typeof Map&&ge(new Map),oe.isMap=function(e){return"undefined"!=typeof Map&&(ge.working?ge(e):e instanceof Map)},he.working="undefined"!=typeof Set&&he(new Set),oe.isSet=function(e){return"undefined"!=typeof Set&&(he.working?he(e):e instanceof Set)},be.working="undefined"!=typeof WeakMap&&be(new WeakMap),oe.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(be.working?be(e):e instanceof WeakMap)},ve.working="undefined"!=typeof WeakSet&&ve(new WeakSet),oe.isWeakSet=function(e){return ve(e)},me.working="undefined"!=typeof ArrayBuffer&&me(new ArrayBuffer),oe.isArrayBuffer=Ae,we.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&we(new DataView(new ArrayBuffer(1),0,1)),oe.isDataView=Se;var je="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function Oe(e){return"[object SharedArrayBuffer]"===le(e)}function Ie(e){return void 0!==je&&(void 0===Oe.working&&(Oe.working=Oe(new je)),Oe.working?Oe(e):e instanceof je)}function Pe(e){return de(e,pe)}function Ee(e){return de(e,se)}function ke(e){return de(e,ce)}function xe(e){return ae&&de(e,fe)}function $e(e){return ue&&de(e,ye)}oe.isSharedArrayBuffer=Ie,oe.isAsyncFunction=function(e){return"[object AsyncFunction]"===le(e)},oe.isMapIterator=function(e){return"[object Map Iterator]"===le(e)},oe.isSetIterator=function(e){return"[object Set Iterator]"===le(e)},oe.isGeneratorObject=function(e){return"[object Generator]"===le(e)},oe.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===le(e)},oe.isNumberObject=Pe,oe.isStringObject=Ee,oe.isBooleanObject=ke,oe.isBigIntObject=xe,oe.isSymbolObject=$e,oe.isBoxedPrimitive=function(e){return Pe(e)||Ee(e)||ke(e)||xe(e)||$e(e)},oe.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(Ae(e)||Ie(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(oe,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}));Object.create;var Fe,Te,Ue,Re=Fe={};function Be(){throw new Error("setTimeout has not been defined")}function Ne(){throw new Error("clearTimeout has not been defined")}function De(e){if(Te===setTimeout)return setTimeout(e,0);if((Te===Be||!Te)&&setTimeout)return Te=setTimeout,setTimeout(e,0);try{return Te(e,0)}catch(Nt){try{return Te.call(null,e,0)}catch(Nt){return Te.call(this,e,0)}}}!function(){try{Te="function"==typeof setTimeout?setTimeout:Be}catch(Nt){Te=Be}try{Ue="function"==typeof clearTimeout?clearTimeout:Ne}catch(Nt){Ue=Ne}}();var Ve,Me=[],Ge=!1,_e=-1;function We(){Ge&&Ve&&(Ge=!1,Ve.length?Me=Ve.concat(Me):_e=-1,Me.length&&ze())}function ze(){if(!Ge){var e=De(We);Ge=!0;for(var t=Me.length;t;){for(Ve=Me,Me=[];++_e<t;)Ve&&Ve[_e].run();_e=-1,t=Me.length}Ve=null,Ge=!1,function(e){if(Ue===clearTimeout)return clearTimeout(e);if((Ue===Ne||!Ue)&&clearTimeout)return Ue=clearTimeout,clearTimeout(e);try{Ue(e)}catch(Nt){try{return Ue.call(null,e)}catch(Nt){return Ue.call(this,e)}}}(e)}}function Ce(e,t){this.fun=e,this.array=t}function Le(){}Re.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];Me.push(new Ce(e,t)),1!==Me.length||Ge||De(ze)},Ce.prototype.run=function(){this.fun.apply(null,this.array)},Re.title="browser",Re.browser=!0,Re.env={},Re.argv=[],Re.version="",Re.versions={},Re.on=Le,Re.addListener=Le,Re.once=Le,Re.off=Le,Re.removeListener=Le,Re.removeAllListeners=Le,Re.emit=Le,Re.prependListener=Le,Re.prependOnceListener=Le,Re.listeners=function(e){return[]},Re.binding=function(e){throw new Error("process.binding is not supported")},Re.cwd=function(){return"/"},Re.chdir=function(e){throw new Error("process.chdir is not supported")},Re.umask=function(){return 0};var Je={};(function(e){(function(){var t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r};if(e.env.NODE_DEBUG){var r=e.env.NODE_DEBUG;r=r.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),new RegExp("^"+r+"$","i")}function n(e,t){var r={seen:[],stylize:i};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),s(t)?r.showHidden=t:t&&Je._extend(r,t),d(r.showHidden)&&(r.showHidden=!1),d(r.depth)&&(r.depth=2),d(r.colors)&&(r.colors=!1),d(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),a(r,e,r.depth)}function o(e,t){var r=n.styles[t];return r?"\x1b["+n.colors[r][0]+"m"+e+"\x1b["+n.colors[r][1]+"m":e}function i(e,t){return e}function a(e,t,r){if(e.customInspect&&t&&m(t.inspect)&&t.inspect!==Je.inspect&&(!t.constructor||t.constructor.prototype!==t)){var n=t.inspect(r,e);return y(n)||(n=a(e,n,r)),n}var o=function(e,t){if(d(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return f(t)?e.stylize(""+t,"number"):s(t)?e.stylize(""+t,"boolean"):c(t)?e.stylize("null","null"):void 0}(e,t);if(o)return o;var i=Object.keys(t),h=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),v(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return u(t);if(0===i.length){if(m(t)){var A=t.name?": "+t.name:"";return e.stylize("[Function"+A+"]","special")}if(g(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(b(t))return e.stylize(Date.prototype.toString.call(t),"date");if(v(t))return u(t)}var S,j="",O=!1,I=["{","}"];return p(t)&&(O=!0,I=["[","]"]),m(t)&&(j=" [Function"+(t.name?": "+t.name:"")+"]"),g(t)&&(j=" "+RegExp.prototype.toString.call(t)),b(t)&&(j=" "+Date.prototype.toUTCString.call(t)),v(t)&&(j=" "+u(t)),0!==i.length||O&&0!=t.length?r<0?g(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),S=O?function(e,t,r,n,o){for(var i=[],a=0,u=t.length;a<u;++a)w(t,String(a))?i.push(l(e,t,r,n,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(l(e,t,r,n,o,!0))})),i}(e,t,r,h,i):i.map((function(n){return l(e,t,r,h,n,O)})),e.seen.pop(),function(e,t,r){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}(S,j,I)):I[0]+j+I[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,n,o,i){var u,l,p;if((p=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?l=p.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):p.set&&(l=e.stylize("[Setter]","special")),w(n,o)||(u="["+o+"]"),l||(e.seen.indexOf(p.value)<0?(l=c(r)?a(e,p.value,null):a(e,p.value,r-1)).indexOf("\n")>-1&&(l=i?l.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+l.split("\n").map((function(e){return"   "+e})).join("\n")):l=e.stylize("[Circular]","special")),d(u)){if(i&&o.match(/^\d+$/))return l;(u=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+l}function p(e){return Array.isArray(e)}function s(e){return"boolean"==typeof e}function c(e){return null===e}function f(e){return"number"==typeof e}function y(e){return"string"==typeof e}function d(e){return void 0===e}function g(e){return h(e)&&"[object RegExp]"===A(e)}function h(e){return"object"==typeof e&&null!==e}function b(e){return h(e)&&"[object Date]"===A(e)}function v(e){return h(e)&&("[object Error]"===A(e)||e instanceof Error)}function m(e){return"function"==typeof e}function A(e){return Object.prototype.toString.call(e)}Je.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},Je.types=oe,Je.types.isRegExp=g,Je.types.isDate=b,Je.types.isNativeError=v;function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Je._extend=function(e,t){if(!t||!h(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var S="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;Je.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(S&&e[S]){var r;if("function"!=typeof(r=e[S]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,S,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,o)}catch(a){r(a)}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),S&&Object.defineProperty(r,S,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,t(e))},Je.promisify.custom=S}).call(this)}).call(this,Fe);var qe={},He=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qe,"__esModule",{value:!0}),qe.Gubu=void 0;const Ze=He({name:"gubu",version:"0.0.6",description:"An object shape validation utility.",main:"gubu.js",browser:"gubu.min.js",type:"commonjs",types:"gubu.d.ts",homepage:"https://github.com/rjrodger/gubu",keywords:["gubu"],author:"Richard Rodger (http://richardrodger.com)",repository:{type:"git",url:"git://github.com/rjrodger/gubu.git"},scripts:{test:"jest --coverage","test-some":"jest -t","test-watch":"jest --coverage --watchAll","test-web":"npm run build-web && browserify -o test/web.js -e test/entry.js -im && open test/web.html",watch:"tsc -w -d",build:"tsc -d","build-web":"cp gubu.js gubu.min.js && browserify -o gubu.min.js -e gubu.web.js -s Gubu -im -p tinyify",clean:"rm -rf node_modules yarn.lock package-lock.json",reset:"npm run clean && npm i && npm test","repo-tag":"REPO_VERSION=`node -e \"console.log(require('./package').version)\"` && echo TAG: v$REPO_VERSION && git commit -a -m v$REPO_VERSION && git push && git tag v$REPO_VERSION && git push --tags;","repo-publish":"npm run clean && npm i && npm run repo-publish-quick","repo-publish-quick":"npm run build && npm run test && npm run build-web && npm run test-web && npm run repo-tag && npm publish --access public --registry https://registry.npmjs.org "},license:"MIT",engines:{node:">=12"},files:["*.ts","*.js","*.map","LICENSE"],devDependencies:{"@types/jest":"^27.4.0",jest:"^27.4.7","ts-jest":"^27.1.2",typescript:"^4.5.4",browserify:"^17.0.0",tinyify:"^3.0.0"},dependencies:{}}),Ke=Symbol.for("gubu$"),Qe={gubu$:Ke,v$:Ze.default.version};class Xe{constructor(e,t,r){this.dI=0,this.nI=2,this.cI=-1,this.pI=0,this.sI=-1,this.valType="never",this.isRoot=!1,this.key="",this.type="never",this.stop=!0,this.nextSibling=!0,this.fromDefault=!1,this.err=[],this.parents=[],this.keys=[],this.path=[],this.root=e,this.vals=[e,-1],this.node=t,this.nodes=[t,-1],this.ctx=r||{}}next(){this.stop=!1,this.fromDefault=!1,this.isRoot=0===this.pI;let e=this.nodes[this.pI];for(;+e;)this.pI=+e,e=this.nodes[this.pI],this.dI--;e?(this.node=e,this.updateVal(this.vals[this.pI]),this.key=this.keys[this.pI],this.cI=this.pI,this.sI=this.pI+1,this.parent=this.parents[this.pI],this.nextSibling=!0,this.type=this.node.t,this.path[this.dI]=this.key,this.oval=this.val):this.stop=!0}updateVal(e){this.val=e,this.valType=typeof this.val,"number"===this.valType&&isNaN(this.val)&&(this.valType="nan"),this.isRoot&&(this.root=this.val)}}class Ye extends TypeError{constructor(e,t,r){super(t.map(e=>e.t).join("\n")),this.gubu=!0,this.name="GubuError",this.code=e,this.desc=()=>({name:"GubuError",code:e,err:t,ctx:r})}toJSON(){return{...this,err:this.desc().err,name:this.name,message:this.message}}}const et={String:!0,Number:!0,Boolean:!0,Object:!0,Array:!0,Function:!0,Symbol:!0,BigInt:!0},tt={string:"",number:0,boolean:!1,object:{},array:[],function:()=>{},symbol:Symbol(""),bigint:BigInt(0),null:null};function rt(e,t){var r,n,o,i,a;if(null!=e&&(null===(r=e.$)||void 0===r?void 0:r.gubu$)){if(Ke===e.$.gubu$)return e.d=null==t?e.d:t,e;if(!0===e.$.gubu$){let r={...e};return r.$={v$:Ze.default.version,...r.$,gubu$:Ke},r.v=null!=r.v&&"object"==typeof r.v?{...r.v}:r.v,r.t=r.t||typeof r.v,"function"===r.t&&et[r.v.name]&&(r.t=r.v.name.toLowerCase(),r.v=Ft(tt[r.t])),r.r=!!r.r,r.o=!!r.o,r.d=null==t?null==r.d?-1:r.d:t,r.b=r.b||[],r.a=r.a||[],r.u=r.u||{},r}}let u=null===e?"null":typeof e,l=e,p=!1,s=void 0,c={};if("object"===(u="undefined"===u?"any":u))Array.isArray(e)?u="array":null!=l&&Function!==l.constructor&&Object!==l.constructor&&null!=l.constructor&&(u="instance",c.n=l.constructor.name,c.i=l.constructor);else if("function"===u)if(et[e.name])u=e.name.toLowerCase(),p=!0,l=Ft(tt[u]);else if(e.gubu===Qe||!0===(null===(n=e.$)||void 0===n?void 0:n.gubu)){let t=e.spec?e.spec():e;u=t.t,l=t.v,p=t.r,c=t.u}else void 0===e.prototype&&Function===e.constructor||Function===(null===(o=e.prototype)||void 0===o?void 0:o.constructor)?(u="custom",s=l):(u="instance",p=!0,c.n=null===(a=null===(i=l.prototype)||void 0===i?void 0:i.constructor)||void 0===a?void 0:a.name,c.i=l);else"number"===u&&isNaN(l)&&(u="nan");let f={$:Qe,t:u,v:null==l||"object"!==u&&"array"!==u?l:{...l},r:p,o:!1,d:null==t?-1:t,u:c,a:[],b:[]};return s&&f.b.push(s),f}function nt(e,t){const r=null==t?{}:t;r.name=null==r.name?"G"+(""+Math.random()).substring(2,8):""+r.name;let n=rt(e,0),o=function(e,t){let r=new Xe(e,n,t);for(;r.next(),!r.stop;){let e=!1;if(0<r.node.b.length)for(let t=0;t<r.node.b.length;t++){let n=ot(r.node.b[t],r);void 0!==n.done&&(e=n.done)}if(!e)if("never"===r.type)r.err.push(xt("never",r,1070));else if("object"===r.type)if(r.node.r&&void 0===r.val)r.err.push(xt("required",r,1010));else if(void 0===r.val||null!==r.val&&"object"===r.valType&&!Array.isArray(r.val)){if(!r.node.o){r.updateVal(r.val||(r.fromDefault=!0,{}));let e=Object.keys(r.node.v);if(0<e.length){r.pI=r.nI;for(let t of e){let e=r.node.v[t]=rt(r.node.v[t],1+r.dI);r.nodes[r.nI]=e,r.vals[r.nI]=r.val[t],r.parents[r.nI]=r.val,r.keys[r.nI]=t,r.nI++}r.dI++,r.nodes[r.nI++]=r.sI,r.nextSibling=!1}}}else r.err.push(xt("type",r,1020));else if("array"===r.type)if(r.node.r&&void 0===r.val)r.err.push(xt("required",r,1030));else if(void 0===r.val||Array.isArray(r.val)){if(!r.node.o){r.updateVal(r.val||(r.fromDefault=!0,[]));let e=Object.keys(r.node.v).filter(e=>!isNaN(+e));if(0<r.val.length||1<e.length){r.pI=r.nI;let t=void 0===r.node.v[0]?pt():r.node.v[0]=rt(r.node.v[0],1+r.dI),n=1;if(1<e.length)for(;n<e.length;n++){let e=r.node.v[n]=rt(r.node.v[n],1+r.dI);r.nodes[r.nI]=e,r.vals[r.nI]=r.val[n-1],r.parents[r.nI]=r.val,r.keys[r.nI]=""+(n-1),r.nI++}for(let e=n-1;e<r.val.length;e++)r.nodes[r.nI]=t,r.vals[r.nI]=r.val[e],r.parents[r.nI]=r.val,r.keys[r.nI]=""+e,r.nI++;r.dI++,r.nodes[r.nI++]=r.sI,r.nextSibling=!1}}}else r.err.push(xt("type",r,1040));else if("any"===r.type||"custom"===r.type||"list"===r.type||void 0===r.val||r.type===r.valType||"instance"===r.type&&r.node.u.i&&r.val instanceof r.node.u.i||"null"===r.type&&null===r.val)if(void 0===r.val){let e=r.path[r.dI];!r.node.r||"undefined"===r.type&&r.parent.hasOwnProperty(e)?(void 0!==r.node.v&&!r.node.o||"undefined"===r.type)&&(r.updateVal(r.node.v),r.fromDefault=!0):r.err.push(xt("required",r,1060))}else"string"!==r.type||""!==r.val||r.node.u.empty||r.err.push(xt("required",r,1080));else r.err.push(xt("type",r,1050));if(0<r.node.a.length)for(let t=0;t<r.node.a.length;t++){let n=ot(r.node.a[t],r);void 0!==n.done&&(e=n.done)}r.parent&&!e&&(r.parent[r.key]=r.val),r.nextSibling&&(r.pI=r.sI)}if(0<r.err.length){if(!r.ctx.err)throw new Ye("shape",r.err,r.ctx);r.ctx.err.push(...r.err)}return r.root};o.spec=()=>(o(void 0,{err:[]}),JSON.parse($t(n,(e,t)=>Ke===t||t)));let i="";return o.toString=o[Je.inspect.custom]=()=>(i=(i=""===i?$t(n&&n.$&&(Ke===n.$.gubu$||!0===n.$.gubu$)?n.v:n):i).substring(0,33)+(33<i.length?"...":""),`[Gubu ${r.name} ${i}]`),o.gubu=Qe,o}function ot(e,t){let r={done:!1};if(!e(t.val,r,t)||r.err){if(void 0===t.val&&(t.node.o||!t.node.r))return delete r.err,r;let n=r.why||"custom",o=it(t.path,t.dI);if("object"==typeof r.err)t.err.push(...[r.err].flat().map(e=>(e.p=null==e.p?o:e.p,e.m=null==e.m?2010:e.m,e)));else{let r=e.name;null!=r&&""!=r||(r=33<(r=e.toString().replace(/[ \t\r\n]+/g," ")).length?r.substring(0,30)+"...":r),t.err.push(xt(n,t,1045,void 0,{},r))}}return void 0!==r.val&&t.updateVal(r.val),void 0!==r.node&&(t.node=r.node),void 0!==r.type&&(t.type=r.type),t.nI=void 0===r.nI?t.nI:r.nI,t.sI=void 0===r.sI?t.sI:r.sI,t.pI=void 0===r.pI?t.pI:r.pI,r}function it(e,t){return e.slice(1,t+1).filter(e=>null!=e).join(".")}const at=function(e){let t=Et(this,e);return t.r=!0,void 0===e&&1===arguments.length&&(t.t="undefined",t.v=void 0),t},ut=function(e){let t=Et(this,e);return t.r=!1,t.o=!0,t},lt=function(e){let t=Et(this,e);return t.u.empty=!0,t},pt=function(e){let t=Et(this,e);return t.t="any",void 0!==e&&(t.v=e),t},st=function(e){let t=Et(this,e);return t.t="never",t},ct=function(...e){let t=Et();t.t="list";let r=e.map(e=>Ut(e));return t.u.list=e,t.b.push((function(e,t,n){let o=!0,i=[];for(let a of r){let t={...n.ctx,err:[]};a(e,t),0<t.err.length&&(o=!1,i.push(...t.err))}return o||(t.why="all",t.err=[kt(e,n,'Value "$VALUE" for path "$PATH" does not satisfy All shape:'),...i]),o})),t},ft=function(...e){let t=Et();t.t="list";let r=e.map(e=>Ut(e));return t.u.list=e,t.b.push((function(e,t,n){let o=!1,i=[];for(let a of r){let t={...n.ctx,err:[]};a(e,t),0<t.err.length?(o||(o=!1),i.push(...t.err)):o=!0}return o||(t.why="some",t.err=[kt(e,n,'Value "$VALUE" for path "$PATH" does not satisfy Some shape:'),...i]),o})),t},yt=function(...e){let t=Et();t.t="list";let r=e.map(e=>Ut(e));return t.u.list=e,t.b.push((function(e,t,n){let o=0,i=[];for(let a of r){let t={...n.ctx,err:[]};a(e,t),0<t.err.length&&(o++,i.push(...t.err))}return 1!==o&&(t.why="one",t.err=[kt(e,n,'Value "$VALUE" for path "$PATH" does not satisfy One shape:'),...i]),!0})),t},dt=function(...e){let t=Et();return t.b.push((function(t,r,n){for(let o=0;o<e.length;o++)if(t===e[o])return!0;return r.err=kt(t,n,'Value "$VALUE" for path "$PATH" must be exactly one of: '+e.map(e=>$t(e)).join(", ")+"."),!1})),t},gt=function(e,t){let r=Et(this,t);return r.b.push(e),r},ht=function(e,t){let r=Et(this,t);return r.a.push(e),r},bt=function(e){let t=Et(this,e);return t.b.push((function(e,r,n){if(null!=e&&"object"==typeof e){let o=Object.keys(e),i=t.v;"array"===n.node.t&&(i=Object.keys(t.v).slice(1).map(e=>{let t=parseInt(e);return isNaN(t)?e:t-1}).reduce((e,t)=>(e[t]=!0,e),{})),r.err=[];for(let e of o)void 0===i[e]&&r.err.push(xt("closed",n,3010,"",{k:e}));return 0===r.err.length}return!0})),t},vt=function(e,t){let r=Et(this,t),n="string"==typeof e?e:("object"==typeof e&&e||{}).name;return null!=n&&""!=n&&r.b.push((function(e,t,r){return(r.ctx.ref=r.ctx.ref||{})[n]=r.node,!0})),r},mt=function(e,t){let r=Et(this,t),n="object"==typeof e&&e||{},o="string"==typeof e?e:n.name,i=!!n.fill;return null!=o&&""!=o&&r.b.push((function(e,t,r){if(void 0!==e||i){let e=r.ctx.ref=r.ctx.ref||{};if(void 0!==e[o]){let r={...e[o]};r.t=r.t||"never",t.node=r,t.type=r.t}}return!0})),r},At=function(e,t){let r=Et(this,t),n="object"==typeof e&&e||{},o="string"==typeof e?e:n.name,i="boolean"==typeof n.keep?n.keep:void 0,a=Array.isArray(n.claim)?n.claim:[];if(null!=o&&""!=o){let e=(e,t,r)=>{if(void 0===e&&0<a.length){r.ctx.Args=r.ctx.Args||{},r.ctx.Args.fromDefault=r.ctx.Args.fromDefault||{};for(let e of a){let n=r.ctx.Args.fromDefault[e];if(void 0!==r.parent[e]&&!n.yes){t.val=r.parent[o]=r.parent[e],t.node=n.node;for(let e=0;e<r.err.length;e++)r.err[e].k===n.key&&(r.err.splice(e,1),e--);if(i){let t=r.cI+1;r.nodes.splice(t,0,rt(n.dval)),r.vals.splice(t,0,void 0),r.parents.splice(t,0,r.parent),r.keys.splice(t,0,e),r.nI++,r.pI++}else delete r.parent[e];break}}void 0===t.val&&(t.val=r.node.v)}return!0};Object.defineProperty(e,"name",{value:"Rename:"+o}),r.b.push(e);let t=(e,t,r)=>(r.parent[o]=e,i||Array.isArray(r.parent)&&!1!==i||(delete r.parent[r.key],t.done=!0),r.ctx.Args=r.ctx.Args||{},r.ctx.Args.fromDefault=r.ctx.Args.fromDefault||{},r.ctx.Args.fromDefault[o]={yes:r.fromDefault,key:r.key,dval:r.node.v,node:r.node},!0);Object.defineProperty(t,"name",{value:"Rename:"+o}),r.a.push(t)}return r};function wt(e){return"number"==typeof e?e:"number"==typeof(null==e?void 0:e.length)?e.length:null!=e&&"object"==typeof e?Object.keys(e).length:NaN}const St=function(e,t){let r=Et(this,t);return r.b.push((function(t,r,n){let o=wt(t);if(e<=o)return!0;let i="number"==typeof t?"":"length ";return r.err=kt(t,n,`Value "$VALUE" for path "$PATH" must be a minimum ${i}of ${e} (was ${o}).`),!1})),r},jt=function(e,t){let r=Et(this,t);return r.b.push((function(t,r,n){let o=wt(t);if(o<=e)return!0;let i="number"==typeof t?"":"length ";return r.err=kt(t,n,`Value "$VALUE" for path "$PATH" must be a maximum ${i}of ${e} (was ${o}).`),!1})),r},Ot=function(e,t){let r=Et(this,t);return r.b.push((function(t,r,n){let o=wt(t);if(e<o)return!0;let i="number"==typeof t?"be":"have length";return r.err=kt(t,n,`Value "$VALUE" for path "$PATH" must ${i} above ${e} (was ${o}).`),!1})),r},It=function(e,t){let r=Et(this,t);return r.b.push((function(t,r,n){let o=wt(t);if(o<e)return!0;let i="number"==typeof t?"be":"have length";return r.err=kt(t,n,`Value "$VALUE" for path "$PATH" must ${i} below ${e} (was ${o}).`),!1})),r},Pt=function(e,t){let r=Et(null==t?this:e),n=rt(null==t?e:t);return r.a.push((function(e,t,r){let o=Object.keys(r.node.v),i=Object.keys(e).reduce((e,t)=>(o.includes(t)||e.push(t),e),[]);if(0<i.length){let t=r.nI+i.length-1,o=r.nI-1;r.nodes[t]=r.nodes[o],r.vals[t]=r.vals[o],r.parents[t]=r.parents[o],r.keys[t]=r.keys[o];for(let a of i)r.nodes[o]=rt(n,1+r.dI),r.vals[o]=e[a],r.parents[o]=e,r.keys[o]=a,o++;r.nI=t+1}return!0})),r};function Et(e,t){let r=rt(void 0===e||e.window===e?t:e);return Object.assign(r,{Above:Ot,After:ht,All:ct,Any:pt,Before:gt,Below:It,Closed:bt,Define:vt,Empty:lt,Exact:dt,Max:jt,Min:St,Never:st,One:yt,Optional:ut,Refer:mt,Rename:At,Required:at,Some:ft,Value:Pt})}function kt(e,t,r,n){return xt(n||"custom",t,4e3,r)}function xt(e,t,r,n,o,i){let a={k:t.key,n:t.node,s:t.val,p:it(t.path,t.dI),w:e,m:r,t:""},u=(void 0===t.val?"":$t(t.val)).replace(/"/g,"");return u=u.substring(0,77)+(77<u.length?"...":""),a.t=null==n||""===n?`Validation failed for path "${a.p}" with value "${u}" because `+("type"===e?"instance"===t.node.t?"the value is not an instance of "+t.node.u.n:"the value is not of type "+t.node.t:"required"===e?"the value is required":"closed"===e?`the property "${null==o?void 0:o.k}" is not allowed`:"never"===e?"no value is allowed":`check "${e+(i?": "+i:"")}" failed`)+".":n.replace(/\$VALUE/g,u).replace(/\$PATH/g,a.p),a}function $t(e,t){try{let r=JSON.stringify(e,(e,r)=>(t&&(r=t(e,r)),null!=r&&"object"==typeof r&&r.constructor&&"Object"!==r.constructor.name&&"Array"!==r.constructor.name?r="function"==typeof r.toString?r.toString():r.constructor.name:"function"==typeof r?r="function"==typeof nt[r.name]?void 0:r.name:"bigint"==typeof r&&(r=String(r.toString())),r));return String(r)}catch(Nt){return JSON.stringify(String(e))}}function Ft(e){return null==e||"object"!=typeof e?e:JSON.parse(JSON.stringify(e))}const Tt=e=>rt({...e,$:{gubu$:!0}});Object.assign(nt,{Above:Ot,After:ht,All:ct,Any:pt,Before:gt,Below:It,Closed:bt,Define:vt,Empty:lt,Exact:dt,Max:jt,Min:St,Never:st,One:yt,Optional:ut,Refer:mt,Rename:At,Required:at,Some:ft,Value:Pt,G$:Tt,buildize:Et,makeErr:kt,Args:Rt}),Object.defineProperty(nt,"name",{value:"gubu"});const Ut=nt;function Rt(e,t){let r=void 0,n=Object.keys(e).reduce((t,n,o,i)=>{if(n.startsWith("...")&&o+1===i.length)r={name:n.substring(3),shape:e[n]};else{let r=n,i=(n.split(":")[1]||"").split(",").filter(e=>""!==e);0<i.length?n=r.split(":")[0]:i=void 0,t[o+1]=At({name:n,claim:i,keep:!0},e[r])}return t},[st()]);r&&(n[0]=ht((e,t,n)=>(n.parent[r.name]=n.parent[r.name]||[],n.parent[r.name].push(e),!0),r.shape),n=ht((e,t,n)=>(e&&(e[r.name]=e[r.name]||[]),!0),n));let o=Ut(n);if(t){let e=function(){let e=Array.prototype.slice.call(arguments),r=o(e);return t.call(this,r)};return null!=t.name&&""!=t.name&&Object.defineProperty(e,"name",{value:t.name+"_args"}),e}return o}qe.Gubu=Ut;const{Gubu:Bt}=qe;return Bt}));